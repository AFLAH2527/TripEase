{% extends "base.html" %}
{% load tailwind_filters %}

{% block title %}
    <title>Traveler Dashboard</title>
{% endblock title  %}

{% block content %}
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-4">Traveler Dashboard</h1>

        <!-- Display earned loyal points -->
        {% if loyal_points %}
            <a href="{% url 'loyalty:purchase-card' %}" class="text-2xl font-semibold mt-8">Loyal Points</a>
            <p>Total Points: {{ loyal_points.total_points }}</p>
            <p>Redeemed Points: {{ loyal_points.points_redeemed }}</p>
            <p>Points Remain: {{ loyal_points.points_remain }}</p>
            <!-- Add more details about loyal points as needed -->
        {% else %}
            
            <p><a href="{% url 'loyalty:purchase-card' %}" class="text-blue-500 hover:underline">Purchase Loyalty Card</a></p>
        {% endif %}
        
        <!-- Form to Show Bookings -->
        <form action="" method="post" class="max-w-md mx-auto bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
            {% csrf_token %}
            <div class="mb-4">
                {{ travel_plan_form|crispy }}
            </div>
            <div class="flex items-center justify-between">
                <input type="submit" value="Show" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            </div>
        </form>

        <!-- Display Bookings -->
        <div class="mt-8">
            <h2 class="text-2xl font-bold mb-4">Your Bookings</h2>

            <!-- Room Bookings - Upcoming -->
            <div class="mb-8">
                <h3 class="text-xl font-bold mb-2">Upcoming Room Bookings</h3>
                <ul>
                    {% for room_booking in room_bookings_upcoming %}
                        <li>{{ room_booking }} - {{ room_booking.no_of_days }} - ${{ room_booking.amount }}</li>
                    {% empty %}
                        <li>No upcoming room bookings.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Room Bookings - Completed -->
            <div class="mb-8">
                <h3 class="text-xl font-bold mb-2">Completed Room Bookings</h3>
                <ul>
                    {% for room_booking in room_bookings_completed %}
                        <li>{{ room_booking }} - {{ room_booking.no_of_days }} - ${{ room_booking.amount }}</li>
                    {% empty %}
                        <li>No completed room bookings.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Combo Bookings -->
            <div class="mb-8">
                <h3 class="text-xl font-bold mb-2">Combo Bookings</h3>
                <!-- Upcoming Combo Bookings -->
                <h4 class="text-lg font-bold mb-2">Upcoming</h4>
                <ul>
                    {% for upcoming_combo_booking in upcoming_combo_bookings %}
                        <li>{{ upcoming_combo_booking }} - {{ upcoming_combo_booking.quantity }} - {{ upcoming_combo_booking.food_date }}</li>
                    {% empty %}
                        <li>No upcoming combo bookings.</li>
                    {% endfor %}
                </ul>

                <!-- Completed Combo Bookings -->
                <h4 class="text-lg font-bold mb-2">Completed</h4>
                <ul>
                    {% for completed_combo_booking in completed_combo_bookings %}
                        <li>{{ completed_combo_booking }} - {{ completed_combo_booking.quantity }} - {{ completed_combo_booking.food_date }}</li>
                    {% empty %}
                        <li>No completed combo bookings.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Taxi Bookings -->
            <div>
                <h3 class="text-xl font-bold mb-2">Taxi Bookings</h3>
                <ul>
                    {% for taxi_booking in taxi_bookings %}
                        <li>{{ taxi_booking }} - {{ taxi_booking.total_rent }}</li>
                    {% empty %}
                        <li>No taxi bookings yet.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        


    </div>
{% endblock content %}
