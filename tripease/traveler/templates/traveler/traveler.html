{% extends "base.html" %}
{% load tailwind_filters %}

{% block title %}
    <title>Traveler Dashboard</title>
{% endblock title  %}

{% block content %}
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-4">Traveler Dashboard</h1>

        <!-- Display earned loyal points -->
        {% if loyal_points %}
            <p><a href="{% url 'loyalty:purchase-card' %}" class="text-blue-500 hover:underline">Loyal Points</a></p>
            <p>Total Points: {{ loyal_points.total_points }}</p>
            <p>Redeemed Points: {{ loyal_points.points_redeemed }}</p>
            <p>Points Remain: {{ loyal_points.points_remain }}</p>
            <!-- Add more details about loyal points as needed -->
        {% endif %}
        
        <!-- Form to Show Bookings -->
        <form action="" method="post" class="max-w-md mx-auto bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
            {% csrf_token %}
            <div class="mb-4">
                {{ travel_plan_form|crispy }}
            </div>
            <div class="flex items-center justify-between">
                <input type="submit" value="Show" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            </div>
        </form>

        <!-- Display Bookings -->
        <div class="mt-8">
            <h2 class="text-2xl font-bold mb-4">Your Bookings</h2>

            <!-- Room Bookings -->
            <div class="mb-8">
                <h3 class="text-xl font-bold mb-2">Room Bookings</h3>
                <ul>
                    {% for room_booking in room_bookings %}
                        <li>{{ room_booking }} - {{ room_booking.no_of_days }} - ${{ room_booking.amount }}</li>
                    {% empty %}
                        <li>No room bookings yet.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Combo Bookings -->
            <div class="mb-8">
                <h3 class="text-xl font-bold mb-2">Combo Bookings</h3>
                <ul>
                    {% for combo_booking in combo_bookings %}
                        <li>{{ combo_booking }} - {{ combo_booking.quantity }} - {{ combo_booking.amount }}</li>
                    {% empty %}
                        <li>No combo bookings yet.</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Taxi Bookings -->
            <div>
                <h3 class="text-xl font-bold mb-2">Taxi Bookings</h3>
                <ul>
                    {% for taxi_booking in taxi_bookings %}
                        <li>{{ taxi_booking }} - {{ taxi_booking.total_rent }}</li>
                    {% empty %}
                        <li>No taxi bookings yet.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        


    </div>
{% endblock content %}
